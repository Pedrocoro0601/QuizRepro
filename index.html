<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reprodu√ß√£o Bovina Quiz</title>
    <!-- Fonte Inter do Google Fonts para consist√™ncia -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* style.css - Estiliza√ß√£o do Quiz de Reprodu√ß√£o Bovina */

        :root {
            --primary-color: #0056b3; /* Azul escuro principal */
            --secondary-color: #6cace4; /* Azul m√©dio, para acentos */
            --background-light: #e0f2f7; /* Azul muito claro, para fundo */
            --card-background: #ffffff; /* Branco puro para cards */
            --text-color-dark: #2c3e50; /* Azul escuro quase preto */
            --text-color-light: #6a6a6a; /* Cinza m√©dio */
            --correct-feedback: #28a745; /* Verde para acerto (padr√£o) */
            --incorrect-feedback: #dc3545; /* Vermelho para erro (padr√£o) */
            --button-hover: #007bff; /* Azul m√©dio para hover de bot√µes prim√°rios */
            --border-radius: 12px;
            --shadow-light: 0 4px 10px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 8px 20px rgba(0, 0, 0, 0.15);
            --dark-blue-background: #1a2b3c; /* Azul muito escuro para a mensagem de desktop */
            --red-button-color: #e74c3c; /* Vermelho para o bot√£o de sair */
            --red-button-hover: #c0392b; /* Vermelho mais escuro para hover */
        }

        /* Base e Tipografia */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--background-light) 0%, #c1e7f0 100%); /* Gradiente de azuis */
            color: var(--text-color-dark);
            line-height: 1.6;
        }

        .main-game-wrapper {
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .container {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            padding: 2.5rem;
            max-width: 500px; /* Max-width para simular tela de celular */
            width: 100%;
            text-align: center;
            box-sizing: border-box;
            position: relative;
        }

        h1 {
            color: var(--primary-color);
            font-size: 2.8em;
            margin-bottom: 1.5rem;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        h2 {
            color: var(--text-color-dark);
            font-size: 1.8em;
            margin-bottom: 1rem;
        }

        h3 {
            color: var(--primary-color);
            font-size: 1.4em;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        h4 {
            color: var(--text-color-dark);
            font-size: 1.1em;
            margin-top: 0.8rem;
            margin-bottom: 0.5rem;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-color-light);
        }

        /* Bot√µes */
        .btn {
            display: inline-block;
            padding: 14px 28px;
            margin: 10px 5px;
            border: none;
            border-radius: 50px; /* Bot√µes mais arredondados */
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .primary-btn {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 86, 179, 0.3);
        }

        .primary-btn:hover {
            background-color: var(--button-hover);
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 86, 179, 0.4);
        }

        .secondary-btn {
            background-color: #f0f0f0;
            color: var(--text-color-dark);
            border: 1px solid #dcdcdc;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }

        .secondary-btn:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        /* Bot√£o Voltar ao site em vermelho */
        #back-to-site-button {
            background-color: var(--red-button-color);
            color: white;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        #back-to-site-button:hover {
            background-color: var(--red-button-hover);
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
        }


        /* Telas de Jogo */
        .screen {
            transition: opacity 0.5s ease-in-out;
        }

        .hidden {
            display: none;
            opacity: 0;
        }

        .active {
            display: block;
            opacity: 1;
        }

        /* Sele√ß√£o de N√≠vel */
        .level-grid {
            display: grid;
            grid-template-columns: 1fr; /* Apenas uma coluna para mobile */
            gap: 12px;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        .level-button {
            background-color: #e6f7ff; /* Azul muito claro */
            color: var(--primary-color);
            padding: 18px;
            border-radius: var(--border-radius);
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: var(--shadow-light);
            text-align: center;
        }

        .level-button:hover:not(.locked) {
            background-color: #cceeff;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }

        .level-button.locked {
            background-color: #e8e8e8; /* Cinza para bloqueado */
            color: #b0b0b0;
            cursor: not-allowed;
            filter: grayscale(100%);
            box-shadow: none;
        }

        .level-button.locked:hover {
            transform: none;
            box-shadow: none;
        }

        /* Estilo do Quiz */
        .header-quiz {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background-color: #f0f3f5; /* Fundo mais claro para cabe√ßalho do quiz */
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            font-weight: 600;
            color: var(--primary-color);
        }

        .level-topic {
            font-size: 1em;
        }

        .question-counter {
            font-size: 0.9em;
            color: var(--text-color-light);
        }

        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            height: 10px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--primary-color);
            border-radius: 5px;
            transition: width 0.4s ease-out;
        }

        .question-card {
            background-color: var(--card-background);
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 25px;
            color: var(--text-color-dark);
            font-weight: 600;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option-btn {
            background-color: #f8f8f8;
            color: var(--text-color-dark);
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .option-btn:hover:not(.disabled) {
            background-color: #eef5fa; /* Azul claro para hover de op√ß√£o */
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .option-btn.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Anima√ß√µes de Feedback */
        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            50% { transform: translateX(4px); }
            75% { transform: translateX(-4px); }
            100% { transform: translateX(0); }
        }

        /* Feedback Overlay */
        .feedback-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px 40px;
            border-radius: var(--border-radius);
            font-size: 2.2em; /* Tamanho maior para destaque */
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            z-index: 1000; /* Garante que fique acima de tudo */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            min-width: 250px;
            pointer-events: none; /* Permite cliques atrav√©s quando hidden */
        }

        .feedback-overlay.correct {
            background-color: var(--correct-feedback);
        }

        .feedback-overlay.incorrect {
            background-color: var(--incorrect-feedback);
        }

        .feedback-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Navigation buttons - Improved Layout */
        .quiz-navigation-buttons {
            display: flex;
            flex-direction: column; /* Stack buttons vertically for mobile */
            gap: 15px; /* Spacing between buttons */
            margin-top: 30px; /* More space from question card */
            width: 100%;
            align-items: center; /* Center align buttons */
        }

        .quiz-navigation-buttons .btn {
            width: 80%; /* Make buttons wider for easier tap */
            max-width: 280px; /* Constrain max width for larger screens */
            padding: 16px 20px; /* Larger padding for better touch target */
            font-size: 1.1em; /* Slightly larger font */
            border-radius: 10px; /* Slightly less rounded than 50px, more modern for blocks */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .quiz-navigation-buttons .primary-btn {
            background-color: var(--primary-color);
            color: white;
        }
        .quiz-navigation-buttons .primary-btn:hover {
            background-color: var(--button-hover);
        }

        .quiz-navigation-buttons .secondary-btn {
            background-color: #e0e0e0;
            color: var(--text-color-dark);
            border: 1px solid #c0c0c0;
        }
        .quiz-navigation-buttons .secondary-btn:hover {
            background-color: #d0d0d0;
        }

        .tip-content {
            background-color: #e0f7fa; /* Azul claro para dicas */
            border-left: 5px solid var(--secondary-color);
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            font-style: italic;
            color: #555;
            text-align: left;
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.1);
        }

        /* Tela Final do N√≠vel / Jogo */
        #level-end-screen, #game-end-screen {
            padding: 30px;
        }

        .unlocked-content-section {
            background-color: #e6f7ff; /* Azul claro para conte√∫do desbloqueado */
            border: 2px dashed var(--primary-color);
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 30px auto;
            text-align: left;
            max-width: 600px;
            box-shadow: 0 4px 15px rgba(0, 86, 179, 0.1);
        }

        .small-text {
            font-size: 0.85em;
            color: #888;
            margin-top: 20px;
        }

        .level-unlock-hint {
            color: var(--incorrect-feedback); /* Vermelho */
            font-weight: 700;
            font-size: 0.9em;
            margin-top: 5px; /* Espa√ßo em rela√ß√£o ao texto acima */
        }

        /* Mensagem de Exclusividade para Desktop */
        .desktop-message {
            display: none; /* Escondido por padr√£o em mobile */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark-blue-background); /* Fundo azul escuro */
            color: white;
            font-size: 1.6em;
            font-weight: 600;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
            z-index: 2000; /* Acima de todo o jogo */
            box-sizing: border-box;
            flex-direction: column;
            line-height: 1.4;
        }

        .desktop-message p {
            margin-bottom: 20px;
            max-width: 600px;
            color: #ecf0f1;
        }

        /* Media Query para exibir a mensagem de desktop e esconder o jogo */
        @media (min-width: 768px) { /* Breakpoint para tablets e desktops */
            .desktop-message {
                display: flex; /* Mostra a mensagem em telas maiores */
            }
            .main-game-wrapper {
                display: none; /* Esconde o jogo em telas maiores */
            }
        }

        /* --- Ajustes para telas muito pequenas (mobile) --- */
        @media (max-width: 576px) { /* Ex: 360px a 575px de largura */
            .container {
                padding: 1.2rem; /* Reduz o padding geral do container */
            }

            h1 {
                font-size: 2.4em; /* Ajusta o tamanho do t√≠tulo principal */
            }

            h2 {
                font-size: 1.6em; /* Ajusta o tamanho dos subt√≠tulos */
            }

            .question-text {
                font-size: 1.1em; /* Ajusta o tamanho do texto da pergunta */
            }

            .btn, .option-btn, .level-button {
                font-size: 0.95em; /* Ajusta o tamanho da fonte dos bot√µes */
                padding: 12px 20px; /* Reduz o padding dos bot√µes */
            }

            .level-button {
                padding: 16px; /* Ajusta o padding do bot√£o de n√≠vel */
            }

            .level-grid, .options-grid {
                gap: 10px; /* Reduz um pouco o espa√ßamento entre os bot√µes */
            }

            .feedback-overlay {
                font-size: 1.8em; /* Ajusta o tamanho da fonte do overlay de feedback */
                padding: 20px 30px;
            }

            .quiz-navigation-buttons .btn {
                width: 95%; /* Wider buttons for very small screens */
                padding: 14px 15px; /* Adjust padding */
                font-size: 0.9em; /* Smaller font for tiny screens */
            }
        }
    </style>
</head>
<body>
    <!-- Mensagem de Exclusividade para Desktop (vis√≠vel apenas em telas maiores) -->
    <div id="desktop-message" class="desktop-message">
        <p>Este jogo √© exclusivo para dispositivos m√≥veis.</p>
        <p>Por favor, abra em um celular para uma melhor experi√™ncia.</p>
    </div>

    <!-- Wrapper principal do jogo (escondido em desktop) -->
    <div class="main-game-wrapper" id="main-game-wrapper">
        <div class="container">
            <!-- Tela Inicial -->
            <div id="start-screen" class="screen active">
                <h2>Bem-vindo(a) ao Desafio da Reprodu√ß√£o Bovina!</h2>
                <p>Prepare-se para testar seus conhecimentos sobre a reprodu√ß√£o bovina. Avance pelos n√≠veis, desbloqueie conte√∫do exclusivo e torne-se um(a) verdadeiro(a) expert!</p>
                <button id="start-button" class="btn primary-btn">Iniciar Jogo</button>
                <button id="back-to-site-button" class="btn primary-btn">Voltar ao site</button>
            </div>

            <!-- Tela de Sele√ß√£o de N√≠vel -->
            <div id="level-selection-screen" class="screen hidden">
                <h2>Selecione um N√≠vel</h2>
                <div id="level-buttons-container" class="level-grid">
                    <!-- Bot√µes de n√≠vel ser√£o inseridos aqui pelo JavaScript -->
                </div>
                <button id="back-to-start-button" class="btn secondary-btn">Voltar ao In√≠cio</button>
                <p class="small-text">Complete os n√≠veis para desbloquear os pr√≥ximos!</p>
                <p class="level-unlock-hint">Voc√™ precisa acertar pelo menos 70% das perguntas para passar de n√≠vel!</p>
            </div>

            <!-- Tela do Quiz -->
            <div id="quiz-screen" class="screen hidden">
                <div class="header-quiz">
                    <span id="level-topic-display" class="level-topic"></span>
                    <span id="question-counter" class="question-counter">Pergunta 1/10</span>
                </div>

                <div class="progress-bar-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>

                <!-- Bot√µes de navega√ß√£o do quiz -->
                <div id="quiz-navigation-buttons" class="quiz-navigation-buttons hidden">
                    <button id="next-button" class="btn primary-btn">Pr√≥xima Pergunta ‚ñ∂</button>
                    <button id="back-to-start-quiz-button" class="btn secondary-btn">Voltar ao In√≠cio</button>
                </div>

                <div class="question-card">
                    <p id="question-text" class="question-text"></p>
                    <div id="options-container" class="options-grid">
                        <!-- Op√ß√µes ser√£o inseridas aqui pelo JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tela Final do N√≠vel -->
            <div id="level-end-screen" class="screen hidden">
                <h2 id="level-end-title"></h2>
                <p id="level-end-score"></p>
                <div id="unlocked-content-section" class="unlocked-content-section hidden">
                    <h3>Conte√∫do Desbloqueado! üîì</h3>
                    <h4 id="unlocked-content-title"></h4>
                    <p id="unlocked-content-description"></p>
                </div>
                <button id="return-to-levels-button" class="btn primary-btn">Voltar para N√≠veis</button>
            </div>

            <!-- Tela Final do Jogo -->
            <div id="game-end-screen" class="screen hidden">
                <h2>üéâ Parab√©ns, Desbravador da Reprodu√ß√£o! üéâ</h2>
                <p>Voc√™ completou todos os n√≠veis do Quiz de Reprodu√ß√£o Bovina! Seu conhecimento √© impressionante. Continue aprendendo e aplicando o que aprendeu!</p>
                <button id="restart-game-button" class="btn primary-btn">Jogar Novamente</button>
            </div>
        </div>
    </div>

    <!-- Feedback Overlay (sempre vis√≠vel, mas hidden por padr√£o) -->
    <div id="feedback-overlay" class="feedback-overlay hidden">
        <span id="overlay-message"></span>
    </div>

    <!-- Elementos de √Åudio para Feedback -->
    <audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-7.mp3" preload="auto"></audio>
    <audio id="incorrect-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3" preload="auto"></audio>

    <script>
        // data.js - Conte√∫do do Quiz de Reprodu√ß√£o Bovina

        const quizData = [
            // N√≠vel 1 ‚Äì Fundamentos
            {
                level: 1,
                topic: "Fundamentos da Reprodu√ß√£o Bovina",
                questions: [
                    {
                        question: "Qual o principal √≥rg√£o reprodutor feminino bovino respons√°vel pela produ√ß√£o de √≥vulos e horm√¥nios?",
                        options: ["√ötero", "Oviduto", "Ov√°rio", "Vagina"],
                        answer: "Ov√°rio",
                        explanation: "O ov√°rio √© a g√¥nada feminina prim√°ria, respons√°vel pela oogenese (produ√ß√£o de √≥vulos) e pela s√≠ntese de horm√¥nios esteroides sexuais, como estr√≥geno e progesterona.",
                        tip: "Pense no √≥rg√£o que tem fun√ß√£o dupla: gameta e horm√¥nio."
                    },
                    {
                        question: "Qual a estrutura do trato reprodutor masculino bovino que armazena e matura os espermatozoides?",
                        options: ["Test√≠culo", "Ducto deferente", "Epid√≠dimo", "Gl√¢ndulas acess√≥rias"],
                        answer: "Epid√≠dimo",
                        explanation: "O epid√≠dimo √© um tubo enovelado localizado na superf√≠cie do test√≠culo, onde os espermatozoides adquirem motilidade progressiva e capacidade de fertiliza√ß√£o, e s√£o armazenados.",
                        tip: "√â um local de 'aperfei√ßoamento' e 'guarda' dos gametas masculinos."
                    },
                    {
                        question: "Em qual fase do ciclo estral bovino a vaca apresenta os sinais mais evidentes de cio e aceita a monta?",
                        options: ["Proestro", "Estro", "Metaestro", "Diestro"],
                        answer: "Estro",
                        explanation: "O estro, ou cio, √© a fase do ciclo em que a f√™mea est√° receptiva sexualmente ao macho, impulsionada pelos altos n√≠veis de estr√≥geno.",
                        tip: "Esta fase √© sin√¥nimo de 'receptividade sexual'."
                    },
                    {
                        question: "Qual o processo de forma√ß√£o dos gametas femininos (√≥vulos) nas g√¥nadas?",
                        options: ["Espermatog√™nese", "Gametog√™nese", "Oogenese", "Mitose"],
                        answer: "Oogenese",
                        explanation: "A oogenese √© o processo de desenvolvimento e matura√ß√£o dos ov√≥citos prim√°rios em √≥vulos maduros, que ocorre nos ov√°rios.",
                        tip: "O prefixo 'oo' refere-se ao √≥vulo."
                    },
                    {
                        question: "Qual a principal caracter√≠stica da fase de diestro no ciclo estral bovino?",
                        options: ["Alta concentra√ß√£o de estr√≥geno", "Presen√ßa de corpo l√∫teo funcional", "Comportamento de cio intenso", "In√≠cio do desenvolvimento folicular"],
                        answer: "Presen√ßa de corpo l√∫teo funcional",
                        explanation: "O diestro √© caracterizado pela presen√ßa do corpo l√∫teo (CL) funcional, que produz progesterona, mantendo o √∫tero pronto para uma poss√≠vel gesta√ß√£o e inibindo o estro.",
                        tip: "√â a fase mais longa do ciclo, dominada por um horm√¥nio de 'manuten√ß√£o'."
                    },
                    {
                        question: "Qual a principal fun√ß√£o das gl√¢ndulas seminais no sistema reprodutor do touro?",
                        options: ["Produzir espermatozoides", "Armazenar espermatozoides", "Produzir fluido seminal rico em nutrientes", "Transportar espermatozoides"],
                        answer: "Produzir fluido seminal rico em nutrientes",
                        tip: "Elas adicionam 'alimento' e 'volume' ao ejaculado."
                    },
                    {
                        question: "Onde ocorre a fecunda√ß√£o na f√™mea bovina?",
                        options: ["√ötero", "Ov√°rio", "Vagina", "Oviduto (Tuba Uterina)"],
                        answer: "Oviduto (Tuba uterina)",
                        explanation: "A fecunda√ß√£o, que √© a uni√£o do espermatozoide com o √≥vulo, ocorre tipicamente na ampola do oviduto (tuba uterina), ap√≥s a ovula√ß√£o.",
                        tip: "√â o 'caminho' que o √≥vulo percorre e encontra o espermatozoide."
                    },
                    {
                        question: "Qual horm√¥nio √© respons√°vel pelos sinais de cio na vaca?",
                        options: ["Progesterona", "Testosterona", "FSH", "Estr√≥geno"],
                        answer: "Estr√≥geno",
                        explanation: "O estr√≥geno, produzido pelos fol√≠culos ovarianos maduros, √© o principal horm√¥nio respons√°vel por induzir o comportamento de estro (cio) e a receptividade sexual.",
                        tip: "Pense no horm√¥nio que prepara o corpo para a reprodu√ß√£o e mostra os 'sinais'."
                    },
                    {
                        question: "O que √© o fol√≠culo ovariano na vaca?",
                        options: ["Uma gl√¢ndula end√≥crina", "A estrutura que abriga o ov√≥cito em desenvolvimento", "Um ducto reprodutor", "Uma parte do √∫tero"],
                        answer: "A estrutura que abriga o ov√≥cito em desenvolvimento",
                        explanation: "O fol√≠culo ovariano √© uma estrutura esf√©rica dentro do ov√°rio que cont√©m e nutre o ov√≥cito, al√©m de produzir estr√≥geno. Ele cresce e se desenvolve at√© a ovula√ß√£o.",
                        tip: "√â o 'ber√ßo' do gameta feminino antes da libera√ß√£o."
                    },
                    {
                        question: "Qual a principal fun√ß√£o do √∫tero na reprodu√ß√£o bovina?",
                        options: ["Produ√ß√£o de √≥vulos", "Armazenamento de espermatozoides", "Desenvolvimento fetal e implanta√ß√£o do embri√£o", "Produ√ß√£o de horm√¥nios"],
                        answer: "Desenvolvimento fetal e implanta√ß√£o do embri√£o",
                        explanation: "O √∫tero √© o √≥rg√£o onde o embri√£o se implanta ap√≥s a fecunda√ß√£o e se desenvolve durante toda a gesta√ß√£o, fornecendo suporte, nutri√ß√£o e prote√ß√£o ao feto.",
                        tip: "√â o 'local de moradia' e crescimento do bezerro durante a gesta√ß√£o."
                    }
                ],
                unlockedContent: {
                    title: "Guia B√°sico de Anatomia Reprodutiva",
                    description: "Parab√©ns! Voc√™ desbloqueou um guia visual sobre a anatomia reprodutiva de vacas e touros. Entender a estrutura √© o primeiro passo para dominar a fisiologia!",
                }
            },
            // N√≠vel 2 ‚Äì Processos Reprodutivos
            {
                level: 2,
                topic: "Processos Reprodutivos e Fisiologia",
                questions: [
                    {
                        question: "Qual o evento que marca o in√≠cio do metaestro ap√≥s o estro, essencial para a forma√ß√£o do corpo l√∫teo?",
                        options: ["Pico de FSH", "Forma√ß√£o do corpo l√∫teo", "Ovula√ß√£o", "Regress√£o do corpo l√∫teo"],
                        answer: "Ovula√ß√£o",
                        explanation: "A ovula√ß√£o √© a libera√ß√£o do ov√≥cito do fol√≠culo ovariano. Ap√≥s a ovula√ß√£o, as c√©lulas foliculares remanescentes formam o corpo l√∫teo, marcando o in√≠cio do metaestro.",
                        tip: "√â o ponto de transi√ß√£o do ciclo, quando o gameta feminino √© liberado."
                    },
                    {
                        question: "Quais s√£o os principais sinais de estro (cio) na vaca, que indicam o momento ideal para a insemina√ß√£o?",
                        options: ["Aumento da ingest√£o de alimentos, isolamento", "Cauda erguida, secre√ß√£o vulvar, montas de outras vacas", "Diminui√ß√£o da produ√ß√£o de leite, agressividade", "Deitar-se frequentemente, mugidos baixos"],
                        answer: "Cauda erguida, secre√ß√£o vulvar, montas de outras vacas",
                        explanation: "Os sinais mais confi√°veis de estro incluem a aceita√ß√£o de monta por outras vacas, cauda erguida, vocaliza√ß√£o, inquieta√ß√£o e presen√ßa de muco cristalino na vulva.",
                        tip: "Pense nos comportamentos que a vaca demonstra quando est√° pronta para acasalar."
                    },
                    {
                        question: "Ap√≥s a ovula√ß√£o, qual estrutura se forma a partir do fol√≠culo rompido e produz progesterona?",
                        options: ["Fol√≠culo secund√°rio", "Corpo albicans", "Corpo l√∫teo", "Cisto folicular"],
                        answer: "Corpo l√∫teo",
                        explanation: "O corpo l√∫teo (CL) se forma a partir das c√©lulas do fol√≠culo ovariano ap√≥s a ovula√ß√£o. Ele √© crucial para a manuten√ß√£o da gesta√ß√£o, produzindo progesterona.",
                        tip: "√â a estrutura que domina a segunda metade do ciclo estral."
                    },
                    {
                        question: "Qual a fun√ß√£o da cauda do espermatozoide na fecunda√ß√£o bovina?",
                        options: ["Armazenar DNA", "Produzir energia", "Movimentar o espermatozoide", "Reconhecer o √≥vulo"],
                        answer: "Movimentar o espermatozoide",
                        explanation: "A cauda (flagelo) do espermatozoide √© respons√°vel pela sua motilidade, permitindo que ele se desloque atrav√©s do trato reprodutor feminino para alcan√ßar e fertilizar o √≥vulo.",
                        tip: "Pense na parte do espermatozoide que d√° a 'propuls√£o'."
                    },
                    {
                        question: "O que √© a capacidade de fertiliza√ß√£o adquirida pelos espermatozoides no trato reprodutor feminino?",
                        options: ["Acrosomo", "Capacita√ß√£o", "Hipermotilidade", "Rea√ß√£o across√¥mica"],
                        answer: "Capacita√ß√£o",
                        explanation: "A capacita√ß√£o esperm√°tica √© um conjunto de altera√ß√µes fisiol√≥gicas que os espermatozoides sofrem no trato reprodutor feminino, tornando-os aptos para a fecunda√ß√£o.",
                        tip: "√â um 'amadurecimento final' para a fun√ß√£o de fertiliza√ß√£o."
                    },
                    {
                        question: "Qual o per√≠odo ideal para a insemina√ß√£o artificial em vacas ap√≥s a observa√ß√£o do cio?",
                        options: ["Imediatamente ap√≥s o cio", "12-18 horas ap√≥s o in√≠cio do cio", "24-30 horas ap√≥s o in√≠cio do cio", "No dia seguinte ao fim do cio"],
                        answer: "12-18 horas ap√≥s o in√≠cio do cio",
                        explanation: "A 'regra AM/PM' sugere inseminar no per√≠odo da tarde vacas que demonstraram cio pela manh√£, e pela manh√£ as que demonstraram cio √† tarde, visando a ovula√ß√£o.",
                        tip: "N√£o √© nem muito cedo, nem muito tarde; h√° um 'janela' ideal."
                    },
                    {
                        question: "O que √© a Rea√ß√£o Across√¥mica e por que ela √© importante para a fecunda√ß√£o?",
                        options: ["A forma√ß√£o da cauda do espermatozoide", "A libera√ß√£o de enzimas para penetrar o √≥vulo", "O movimento do espermatozoide no oviduto", "A jun√ß√£o do espermatozoide ao √∫tero"],
                        answer: "A libera√ß√£o de enzimas para penetrar o √≥vulo",
                        explanation: "A rea√ß√£o across√¥mica √© a libera√ß√£o de enzimas da cabe√ßa do espermatozoide que digerem as camadas externas do √≥vulo (zona pel√∫cida e corona radiata), permitindo a penetra√ß√£o.",
                        tip: "Pense em uma 'explos√£o' na cabe√ßa do espermatozoide para abrir caminho."
                    },
                    {
                        question: "Qual a principal fun√ß√£o do muco cervical produzido durante o estro na vaca?",
                        options: ["Proteger contra infec√ß√µes", "Nutrir o embri√£o", "Facilitar o transporte de espermatozoides", "Regular a temperatura uterina"],
                        answer: "Facilitar o transporte de espermatozoides",
                        explanation: "Durante o estro, o muco cervical se torna mais aquoso e filamentoso, criando um ambiente favor√°vel e um 'canal' para o transporte eficiente dos espermatozoides em dire√ß√£o ao oviduto.",
                        tip: "Ele age como uma 'via expressa' para os espermatozoides."
                    },
                    {
                        question: "O que √© lute√≥lise e qual horm√¥nio a desencadeia na vaca n√£o gestante?",
                        options: ["Forma√ß√£o do corpo l√∫teo, LH", "Regress√£o do corpo l√∫teo, PGF2Œ±", "Ovula√ß√£o, FSH", "Desenvolvimento folicular, Estr√≥geno"],
                        answer: "Regress√£o do corpo l√∫teo, PGF2Œ±",
                        explanation: "A lute√≥lise √© a regress√£o do corpo l√∫teo, levando √† queda da progesterona. Em vacas n√£o gestantes, √© desencadeada pela Prostaglandina F2Œ± (PGF2Œ±) produzida pelo √∫tero.",
                        tip: "√â o processo de 'desaparecimento' do corpo l√∫teo, permitindo um novo ciclo."
                    },
                    {
                        question: "Qual o horm√¥nio que estimula o desenvolvimento dos fol√≠culos ovarianos na vaca?",
                        options: ["LH", "Progesterona", "FSH", "Estr√≥geno"],
                        answer: "FSH",
                        explanation: "O Horm√¥nio Fol√≠culo Estimulante (FSH) √© produzido pela hip√≥fise anterior e atua diretamente nos ov√°rios, promovendo o crescimento e desenvolvimento dos fol√≠culos ovarianos.",
                        tip: "Pense no horm√¥nio que d√° o 'pontap√© inicial' para a forma√ß√£o de novos fol√≠culos."
                    }
                ],
                unlockedContent: {
                    title: "Desvendando o Ciclo Estral Bovino",
                    description: "Excelente! Voc√™ desbloqueou um material aprofundado sobre o ciclo estral e os processos fisiol√≥gicos da reprodu√ß√£o. Entenda cada fase e sua import√¢ncia!",
                }
            },
            // N√≠vel 3 ‚Äì FIV e Embriologia
            {
                level: 3,
                topic: "Reprodu√ß√£o Assistida e Embriologia",
                questions: [
                    {
                        question: "O que √© 'm√≥rula' no desenvolvimento embrion√°rio bovino?",
                        options: ["Um ov√≥cito rec√©m-ovulado", "Uma massa compacta de c√©lulas embrion√°rias", "A fase de implanta√ß√£o no √∫tero", "O embri√£o em est√°gio de blastocisto"],
                        answer: "Uma massa compacta de c√©lulas embrion√°rias",
                        explanation: "A m√≥rula √© um est√°gio inicial do desenvolvimento embrion√°rio, caracterizada por uma massa compacta de c√©lulas (blast√¥meros) que se assemelha a uma 'amora'.",
                        tip: "O nome vem do latim e significa 'pequena amora'."
                    },
                    {
                        question: "Na Fertiliza√ß√£o In Vitro (FIV), qual o principal objetivo da superovula√ß√£o da doadora?",
                        options: ["Aumentar a qualidade dos o√≥citos", "Produzir m√∫ltiplos fol√≠culos e o√≥citos", "Reduzir o tempo de gesta√ß√£o", "Evitar a lute√≥lise"],
                        answer: "Produzir m√∫ltiplos fol√≠culos e o√≥citos",
                        tip: "O objetivo √© 'colher' mais de um ov√≥cito de uma vez."
                    },
                    {
                        question: "Qual o est√°gio embrion√°rio que precede o blastocisto, caracterizado pela compacta√ß√£o das c√©lulas?",
                        options: ["Zigoto", "2 c√©lulas", "M√≥rula", "G√°strula"],
                        answer: "M√≥rula",
                        explanation: "Ap√≥s a fase de 8-16 c√©lulas, os blast√¥meros se compactam para formar a m√≥rula, que √© um est√°gio crucial antes da forma√ß√£o da cavidade do blastocisto.",
                        tip: "√â o est√°gio 's√≥lido' antes de se tornar 'oco'."
                    },
                    {
                        question: "O que √© um embri√£o classificado como 'Grau 1' na FIV bovina?",
                        options: ["Embri√£o de baixa qualidade", "Embri√£o em est√°gio inicial de desenvolvimento", "Embri√£o de excelente qualidade, vi√°vel para transfer√™ncia", "Embri√£o com alguma anomalia"],
                        answer: "Embri√£o de excelente qualidade, vi√°vel para transfer√™ncia",
                        tip: "Pense na classifica√ß√£o 'A+' ou 'top de linha'."
                    },
                    {
                        question: "Qual a fun√ß√£o da 'zona pel√∫cida' no √≥vulo ap√≥s a fecunda√ß√£o?",
                        options: ["Nutrir o embri√£o", "Anexar o √≥vulo ao oviduto", "Prevenir a polispermia (entrada de m√∫ltiplos espermatozoides)", "Produzir horm√¥nios"],
                        answer: "Prevenir a polispermia (entrada de m√∫ltiplos espermatozoides)",
                        tip: "√â uma 'barreira de seguran√ßa' para o √≥vulo fertilizado."
                    },
                    {
                        question: "O que significa 'blastocisto' no contexto da embriologia bovina?",
                        options: ["A primeira divis√£o celular do zigoto", "Um √≥vulo maduro", "Um embri√£o com cavidade interna e massa celular interna", "Uma massa de espermatozoides"],
                        answer: "Um embri√£o com cavidade interna e massa celular interna",
                        tip: "√â o est√°gio ideal para a transfer√™ncia de embri√µes e o nome indica uma 'bolha' (cavidade)."
                    },
                    {
                        question: "Em qual fase do desenvolvimento embrion√°rio o embri√£o bovino √© tipicamente transferido para a receptora na FIV?",
                        options: ["Zigoto", "M√≥rula", "Blastocisto", "G√°strula"],
                        answer: "Blastocisto",
                        tip: "√â o est√°gio mais 'maduro' para o procedimento de transfer√™ncia."
                    },
                    {
                        question: "Qual a import√¢ncia da 'morfologia de o√≥citos' na FIV bovina?",
                        options: ["Determinar o sexo do futuro embri√£o", "Apenas para fins de pesquisa", "Estimular a ovula√ß√£o", "Prever a capacidade de desenvolvimento e fertiliza√ß√£o"],
                        answer: "Prever a capacidade de desenvolvimento e fertiliza√ß√£o",
                        tip: "√â como uma 'sele√ß√£o' inicial para garantir a qualidade."
                    },
                    {
                        question: "Qual t√©cnica de reprodu√ß√£o assistida envolve a coleta de o√≥citos diretamente dos ov√°rios e a fertiliza√ß√£o em laborat√≥rio?",
                        options: ["Insemina√ß√£o Artificial", "Transfer√™ncia de Embri√µes", "FIV (Fertiliza√ß√£o In Vitro)", "Sincroniza√ß√£o de Cio"],
                        answer: "FIV (Fertiliza√ß√£o In Vitro)",
                        tip: "√â a 'beb√™ de proveta' no mundo bovino."
                    },
                    {
                        question: "No desenvolvimento embrion√°rio, o que √© o 'zigoto'?",
                        options: ["O √≥vulo antes da fecunda√ß√£o", "O espermatozoide", "A c√©lula resultante da uni√£o do √≥vulo e espermatozoide", "Um embri√£o de 8 c√©lulas"],
                        answer: "A c√©lula resultante da uni√£o do √≥vulo e espermatozoide",
                        tip: "√â o 'ponto zero' do desenvolvimento embrion√°rio."
                    }
                ],
                unlockedContent: {
                    title: "Desvendando o Mundo da FIV e Embriologia",
                    description: "Fant√°stico! Voc√™ agora tem acesso a um conte√∫do exclusivo sobre Fertiliza√ß√£o In Vitro e os fascinantes est√°gios do desenvolvimento embrion√°rio bovino.",
                }
            },
            // N√≠vel 4 ‚Äì Hormonal e Gestacional
            {
                level: 4,
                topic: "Regula√ß√£o Hormonal e Gesta√ß√£o",
                questions: [
                    {
                        question: "Qual horm√¥nio √© essencial para a manuten√ß√£o da gesta√ß√£o em bovinos, sendo produzido pelo corpo l√∫teo?",
                        options: ["Estr√≥geno", "LH", "FSH", "Progesterona"],
                        answer: "Progesterona",
                        tip: "√â o horm√¥nio da 'gravidez'."
                    },
                    {
                        question: "Qual o horm√¥nio respons√°vel por induzir o pico de LH e, consequentemente, a ovula√ß√£o?",
                        options: ["FSH", "Progesterona", "GnRH", "PGF2Œ±"],
                        answer: "GnRH",
                        tip: "√â o 'maestro' que regula a hip√≥fise para liberar os horm√¥nios ovulat√≥rios."
                    },
                    {
                        question: "Qual o per√≠odo m√©dio de gesta√ß√£o em vacas?",
                        options: ["180 dias", "210 dias", "280 dias", "320 dias"],
                        answer: "280 dias",
                        tip: "√â o tempo em que o bezerro fica no √∫tero."
                    },
                    {
                        question: "Qual o principal m√©todo para diagn√≥stico precoce de gesta√ß√£o em bovinos na fazenda?",
                        options: ["Observa√ß√£o do comportamento", "Palpa√ß√£o retal", "An√°lise de urina", "Exame de sangue para FSH"],
                        answer: "Palpa√ß√£o retal",
                        tip: "√â um m√©todo 'manual' de detec√ß√£o."
                    },
                    {
                        question: "Qual horm√¥nio √© utilizado para induzir a lute√≥lise e a regress√£o do corpo l√∫teo em programas de sincroniza√ß√£o de cio?",
                        options: ["Progesterona", "Estr√≥geno", "PGF2Œ±", "Oxitocina"],
                        answer: "PGF2Œ±",
                        tip: "√â o horm√¥nio que 'finaliza' a fase l√∫tea para iniciar um novo ciclo."
                    },
                    {
                        question: "Qual a fase do parto (parturi√ß√£o) em que ocorre a expuls√£o do feto?",
                        options: ["Fase de prepara√ß√£o", "Fase de dilata√ß√£o", "Fase de expuls√£o", "Fase de elimina√ß√£o das membranas fetais"],
                        answer: "Fase de expuls√£o",
                        tip: "√â a fase mais 'vis√≠vel' do parto."
                    },
                    {
                        question: "Qual horm√¥nio √© liberado em resposta √† suc√ß√£o do bezerro durante a amamenta√ß√£o e causa a eje√ß√£o do leite?",
                        options: ["Prolactina", "Estr√≥geno", "Oxitocina", "Progesterona"],
                        answer: "Oxitocina",
                        tip: "√â o horm√¥nio do 'amor' e da 'amamenta√ß√£o'."
                    },
                    {
                        question: "O que √© 'reten√ß√£o de placenta' em bovinos?",
                        options: ["A placenta se solta muito r√°pido", "A placenta n√£o √© eliminada ap√≥s o parto em tempo h√°bil", "Inflama√ß√£o da placenta", "Desenvolvimento anormal da placenta"],
                        answer: "A placenta n√£o √© eliminada ap√≥s o parto em tempo h√°bil",
                        tip: "√â quando a 'limpeza' p√≥s-parto n√£o acontece naturalmente."
                    },
                    {
                        question: "Qual a import√¢ncia da 'prolactina' na reprodu√ß√£o bovina?",
                        options: ["Induz o cio", "Causa ovula√ß√£o", "Promove o crescimento do corpo l√∫teo", "Estimula a lacta√ß√£o e inibe a ciclicidade p√≥s-parto"],
                        answer: "Estimula a lacta√ß√£o e inibe a ciclicidade p√≥s-parto",
                        tip: "Est√° ligada √† 'produ√ß√£o de leite' e √† 'pausa' reprodutiva."
                    },
                    {
                        question: "O que √© 'involu√ß√£o uterina' e quando ela ocorre?",
                        options: ["Crescimento do √∫tero durante a gesta√ß√£o", "Diminui√ß√£o do √∫tero para o tamanho pr√©-gestacional ap√≥s o parto", "Inflama√ß√£o do √∫tero", "Pro lapso do √∫tero"],
                        answer: "Diminui√ß√£o do √∫tero para o tamanho pr√©-gestacional ap√≥s o parto",
                        tip: "√â a 'recupera√ß√£o' do √∫tero ap√≥s a gesta√ß√£o."
                    }
                ],
                unlockedContent: {
                    title: "Guia Avan√ßado: Horm√¥nios e Gesta√ß√£o Bovina",
                    description: "Incr√≠vel! Voc√™ se tornou um especialista em horm√¥nios reprodutivos e nas fases da gesta√ß√£o. Esse conhecimento √© chave para o manejo da reprodu√ß√£o bovina!",
                }
            }
        ];

        // Conte√∫do de introdu√ß√£o/conclus√£o do jogo, se necess√°rio.
        const gameIntro = {
            title: "Bem-vindo ao Quiz de Reprodu√ß√£o Bovina!",
            description: "Prepare-se para testar seus conhecimentos e aprender tudo sobre a reprodu√ß√£o em bovinos. Avance pelos n√≠veis, desbloqueie conte√∫do exclusivo e torne-se um expert!"
        };

        const gameEnd = {
            title: "Parab√©ns, Desbravador da Reprodu√ß√£o!",
            description: "Voc√™ completou todos os n√≠veis do Quiz de Reprodu√ß√£o Bovina! Seu conhecimento √© impressionante. Continue aprendendo e aplicando o que aprendeu!"
        };
    </script>
    <script>
        // script.js - L√≥gica do Quiz de Reprodu√ß√£o Bovina

        // Vari√°veis de Estado do Jogo
        let currentLevelIndex = 0;
        let currentQuestionIndex = 0;
        let correctAnswersInLevel = 0;
        let unlockedLevels = []; // Array para armazenar os √≠ndices dos n√≠veis desbloqueados
        const questionsPerLevel = 10; // N√∫mero de perguntas por n√≠vel

        // Elementos do DOM
        const mainGameWrapper = document.getElementById('main-game-wrapper'); // Wrapper principal do jogo
        const desktopMessage = document.getElementById('desktop-message'); // Mensagem de desktop

        const startScreen = document.getElementById('start-screen');
        const levelSelectionScreen = document.getElementById('level-selection-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const levelEndScreen = document.getElementById('level-end-screen');
        const gameEndScreen = document.getElementById('game-end-screen');

        const startButton = document.getElementById('start-button');
        const backToSiteButton = document.getElementById('back-to-site-button'); // Novo bot√£o "Voltar ao site"
        const levelButtonsContainer = document.getElementById('level-buttons-container');
        const backToStartButton = document.getElementById('back-to-start-button'); // Bot√£o "Voltar ao In√≠cio" na sele√ß√£o de n√≠vel

        const levelTopicDisplay = document.getElementById('level-topic-display');
        const questionCounter = document.getElementById('question-counter');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        
        const nextButton = document.getElementById('next-button');
        const backToStartQuizButton = document.getElementById('back-to-start-quiz-button'); // Bot√£o "Voltar ao In√≠cio" no quiz

        const levelEndTitle = document.getElementById('level-end-title');
        const levelEndScore = document.getElementById('level-end-score');
        const unlockedContentSection = document.getElementById('unlocked-content-section');
        const unlockedContentTitle = document.getElementById('unlocked-content-title');
        const unlockedContentDescription = document.getElementById('unlocked-content-description');
        const returnToLevelsButton = document.getElementById('return-to-levels-button');
        const restartGameButton = document.getElementById('restart-game-button');

        const feedbackOverlay = document.getElementById('feedback-overlay'); // Elemento de overlay de feedback
        const overlayMessage = document.getElementById('overlay-message'); // Mensagem dentro do overlay

        const quizNavigationButtons = document.getElementById('quiz-navigation-buttons'); // Container dos bot√µes de navega√ß√£o no quiz

        // Elementos de √Åudio
        const correctSound = document.getElementById('correct-sound');
        const incorrectSound = document.getElementById('incorrect-sound');

        // --- Fun√ß√µes de Inicializa√ß√£o e Carregamento ---

        /**
         * Carrega o progresso salvo no localStorage.
         */
        function loadProgress() {
            const savedUnlockedLevels = localStorage.getItem('unlockedLevels');
            if (savedUnlockedLevels) {
                unlockedLevels = JSON.parse(savedUnlockedLevels);
            } else {
                // Se n√£o houver progresso salvo, desbloqueia o primeiro n√≠vel
                unlockedLevels = [0];
            }
        }

        /**
         * Salva o progresso atual no localStorage.
         */
        function saveProgress() {
            localStorage.setItem('unlockedLevels', JSON.stringify(unlockedLevels));
        }

        /**
         * Exibe a tela inicial do jogo.
         */
        function showStartScreen() {
            startScreen.classList.add('active');
            startScreen.classList.remove('hidden');
            levelSelectionScreen.classList.add('hidden');
            levelSelectionScreen.classList.remove('active');
            quizScreen.classList.add('hidden');
            quizScreen.classList.remove('active');
            levelEndScreen.classList.add('hidden');
            levelEndScreen.classList.remove('active');
            gameEndScreen.classList.add('hidden');
            gameEndScreen.classList.remove('active');
        }

        /**
         * Exibe a tela de sele√ß√£o de n√≠veis e popula os bot√µes de n√≠vel.
         */
        function showLevelSelectionScreen() {
            startScreen.classList.add('hidden');
            startScreen.classList.remove('active');
            levelSelectionScreen.classList.add('active');
            levelSelectionScreen.classList.remove('hidden');
            quizScreen.classList.add('hidden');
            quizScreen.classList.remove('active');
            levelEndScreen.classList.add('hidden');
            levelEndScreen.classList.remove('active');
            gameEndScreen.classList.add('hidden');
            gameEndScreen.classList.remove('active');

            levelButtonsContainer.innerHTML = ''; // Limpa bot√µes existentes

            quizData.forEach((levelData, index) => {
                const levelButton = document.createElement('button');
                levelButton.classList.add('btn', 'level-button');
                levelButton.textContent = `N√≠vel ${levelData.level} - ${levelData.topic}`;
                levelButton.dataset.levelIndex = index;

                // Verifica se o n√≠vel est√° desbloqueado
                if (unlockedLevels.includes(index)) {
                    levelButton.addEventListener('click', () => loadLevel(index));
                } else {
                    levelButton.classList.add('locked');
                    levelButton.textContent += ' üîí'; // Adiciona cadeado para n√≠veis bloqueados
                }
                levelButtonsContainer.appendChild(levelButton);
            });
        }

        /**
         * Carrega um n√≠vel espec√≠fico do quiz.
         * @param {number} levelIndex - O √≠ndice do n√≠vel a ser carregado.
         */
        function loadLevel(levelIndex) {
            currentLevelIndex = levelIndex;
            currentQuestionIndex = 0;
            correctAnswersInLevel = 0;

            levelSelectionScreen.classList.add('hidden');
            levelSelectionScreen.classList.remove('active');
            quizScreen.classList.add('active');
            quizScreen.classList.remove('hidden');

            displayQuestion();
            updateProgressBar();
        }

        /**
         * Exibe a pergunta atual no UI.
         */
        function displayQuestion() {
            const currentLevel = quizData[currentLevelIndex];
            const currentQuestion = currentLevel.questions[currentQuestionIndex];

            levelTopicDisplay.textContent = `N√≠vel ${currentLevel.level}: ${currentLevel.topic}`;
            questionCounter.textContent = `Pergunta ${currentQuestionIndex + 1}/${questionsPerLevel}`;
            questionText.textContent = currentQuestion.question;

            optionsContainer.innerHTML = ''; // Limpa op√ß√µes anteriores
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option-btn');
                button.textContent = option;
                button.addEventListener('click', () => checkAnswer(option));
                optionsContainer.appendChild(button);
            });

            // Resetar e esconder overlays/bot√µes de navega√ß√£o
            feedbackOverlay.classList.add('hidden');
            quizNavigationButtons.classList.add('hidden'); // Garante que os bot√µes de navega√ß√£o estejam escondidos

            // Habilitar todas as op√ß√µes e remover quaisquer estilos de feedback
            document.querySelectorAll('.option-btn').forEach(button => {
                button.classList.remove('disabled');
                button.style.backgroundColor = ''; /* Remove inline style for background */
                button.style.color = ''; /* Remove inline style for color */
            });
        }

        /**
         * Verifica a resposta selecionada pelo jogador.
         * @param {string} selectedOption - A op√ß√£o selecionada pelo jogador.
         */
        function checkAnswer(selectedOption) {
            const currentQuestion = quizData[currentLevelIndex].questions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.answer;

            // Desabilitar todas as op√ß√µes imediatamente
            document.querySelectorAll('.option-btn').forEach(button => {
                button.classList.add('disabled');
            });

            // Esconder os bot√µes de navega√ß√£o antes de mostrar feedback
            quizNavigationButtons.classList.add('hidden');

            // Exibir feedback no overlay
            feedbackOverlay.classList.remove('hidden');
            overlayMessage.textContent = isCorrect ? "‚úÖ Correto!" : "‚ùå Incorreto!";
            feedbackOverlay.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedbackOverlay.classList.add('active');

            if (isCorrect) {
                correctSound.play();
                correctAnswersInLevel++;
            } else {
                incorrectSound.play();
            }

            // Aplicar destaque de correto/incorreto √†s op√ß√µes - sem anima√ß√£o, apenas a cor se mant√©m
            document.querySelectorAll('.option-btn').forEach(button => {
                if (button.textContent === currentQuestion.answer) {
                    button.style.backgroundColor = 'var(--correct-feedback)'; // Aplica cor de acerto
                    button.style.color = 'white';
                } else if (button.textContent === selectedOption) {
                    button.style.backgroundColor = 'var(--incorrect-feedback)'; // Aplica cor de erro
                    button.style.color = 'white';
                }
            });

            // Ap√≥s um pequeno atraso, esconder o overlay de feedback e revelar os bot√µes de navega√ß√£o
            setTimeout(() => {
                feedbackOverlay.classList.remove('active', 'correct', 'incorrect');
                feedbackOverlay.classList.add('hidden');
                
                quizNavigationButtons.classList.remove('hidden'); // Revela os bot√µes de navega√ß√£o

            }, 1500); // Overlay de feedback vis√≠vel por 1.5 segundos

            updateProgressBar();
        }

        /**
         * Atualiza a barra de progresso do quiz.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questionsPerLevel) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Avan√ßa para a pr√≥xima pergunta ou encerra o n√≠vel/jogo.
         */
        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex < questionsPerLevel) {
                displayQuestion();
            } else {
                // Fim do n√≠vel
                quizScreen.classList.add('hidden');
                quizScreen.classList.remove('active');
                levelEndScreen.classList.add('active');
                levelEndScreen.classList.remove('hidden');

                const currentLevelData = quizData[currentLevelIndex];
                const percentageCorrect = (correctAnswersInLevel / questionsPerLevel) * 100;

                levelEndTitle.textContent = `N√≠vel ${currentLevelData.level} Conclu√≠do!`;
                levelEndScore.textContent = `Voc√™ acertou ${correctAnswersInLevel} de ${questionsPerLevel} perguntas (${percentageCorrect.toFixed(0)}%).`;

                // L√≥gica de desbloqueio de pr√≥ximo n√≠vel
                unlockedContentSection.classList.add('hidden'); // Esconde por padr√£o

                // Se o jogador acertou pelo menos 70% das perguntas, desbloqueia o pr√≥ximo n√≠vel
                if (percentageCorrect >= 70) { // Crit√©rio para desbloqueio
                    if (currentLevelIndex + 1 < quizData.length && !unlockedLevels.includes(currentLevelIndex + 1)) {
                        unlockedLevels.push(currentLevelIndex + 1);
                        saveProgress(); // Salva o novo n√≠vel desbloqueado

                        // Exibe conte√∫do desbloqueado
                        unlockedContentSection.classList.remove('hidden');
                        unlockedContentTitle.textContent = currentLevelData.unlockedContent.title;
                        unlockedContentDescription.textContent = currentLevelData.unlockedContent.description;
                    } else if (currentLevelIndex + 1 === quizData.length) {
                        // √öltimo n√≠vel completado, exibir tela final do jogo
                        showGameEndScreen();
                        return; // Sai da fun√ß√£o para n√£o voltar √† sele√ß√£o de n√≠veis
                    }
                }
            }
        }

        /**
         * Exibe a tela final do jogo quando todos os n√≠veis s√£o conclu√≠dos.
         */
        function showGameEndScreen() {
            levelEndScreen.classList.add('hidden');
            levelEndScreen.classList.remove('active');
            gameEndScreen.classList.add('active');
            gameEndScreen.classList.remove('hidden');
        }

        /**
         * Reinicia o jogo, limpando o progresso e voltando para a tela inicial.
         */
        function restartGame() {
            localStorage.clear(); // Limpa todo o progresso
            unlockedLevels = [0]; // Desbloqueia apenas o primeiro n√≠vel
            showStartScreen();
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', showLevelSelectionScreen);
        backToSiteButton.addEventListener('click', () => { // Evento para o bot√£o "Voltar ao site"
            window.location.href = 'https://repro-fiv-bz5d.vercel.app/#/';
        });
        // Ao sair do jogo (pela sele√ß√£o de n√≠vel ou tela de quiz), ele se reinicia desde o come√ßo
        backToStartButton.addEventListener('click', restartGame);
        backToStartQuizButton.addEventListener('click', restartGame); // Evento para o bot√£o no quiz
        nextButton.addEventListener('click', nextQuestion);
        returnToLevelsButton.addEventListener('click', showLevelSelectionScreen);
        restartGameButton.addEventListener('click', restartGame);

        // Inicializar o jogo ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            showStartScreen(); // Come√ßa na tela inicial
        });
    </script>
</body>
</html>
